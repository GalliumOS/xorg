#!/bin/sh
# Debian x11-common package pre-installation script
# Copyright 1998--2001, 2003 Branden Robinson.
# Licensed under the GNU General Public License, version 2.  See the file
# /usr/share/common-licenses/GPL or <http://www.gnu.org/copyleft/gpl.txt>.
# Acknowlegements to Stephen Early, Mark Eichin, and Manoj Srivastava.

set -e

. /usr/share/debconf/confmodule

THIS_PACKAGE=x11-common
THIS_SCRIPT=preinst
CONFIG_DIR=/etc/X11

#INCLUDE_SHELL_LIB#

if [ "$1" = "install" ] || [ "$1" = "upgrade" ]; then
  if dpkg --compare-versions "$2" lt-nl "1:7.6+7ubuntu1"; then
    remove_conffile_lookup x11-common "/etc/gdm/failsafe-xorg.conf"
    remove_conffile_lookup x11-common "/etc/gdm/failsafeBlacklist"
    remove_conffile_lookup x11-common "/etc/gdm/failsafeDexconf"
    remove_conffile_lookup x11-common "/etc/gdm/failsafeDexconf.old"
    remove_conffile_lookup x11-common "/etc/gdm/failsafeHelpmsg"
    remove_conffile_lookup x11-common "/etc/gdm/failsafeInstall"
    remove_conffile_lookup x11-common "/etc/gdm/failsafeXServer"
    remove_conffile_lookup x11-common "/etc/gdm/failsafeXinit"
  fi
  if dpkg --compare-versions "$2" lt-nl "1:7.6+7ubuntu7"; then
    remove_conffile_lookup x11-common "/etc/init/failsafe-x.conf"
  fi
fi

#DEBHELPER#

exit 0

# vim:set ai et sts=2 sw=2 tw=0:
